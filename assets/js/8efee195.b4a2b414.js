"use strict";(self.webpackChunkzustand_zh=self.webpackChunkzustand_zh||[]).push([[265],{4783:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var s=r(4848),n=r(8453);const o={title:"Auto Generating Selectors",nav:6},a=void 0,c={id:"guides/auto-generating-selectors",title:"Auto Generating Selectors",description:"We recommend using selectors when using either the properties or actions from the store. You can access values from the store like so:",source:"@site/docs/guides/auto-generating-selectors.md",sourceDirName:"guides",slug:"/guides/auto-generating-selectors",permalink:"/zustand-zh/docs/guides/auto-generating-selectors",draft:!1,unlisted:!1,editUrl:"https://github.com/ouweiya/zustand-zh/docs/guides/auto-generating-selectors.md",tags:[],version:"current",frontMatter:{title:"Auto Generating Selectors",nav:6},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/zustand-zh/docs/getting-started/introduction"},next:{title:"Connect to state with URL",permalink:"/zustand-zh/docs/guides/connect-to-state-with-url-hash"}},i={},l=[{value:"create the following function: <code>createSelectors</code>",id:"create-the-following-function-createselectors",level:2},{value:"Vanilla Store",id:"vanilla-store",level:2},{value:"Live Demo",id:"live-demo",level:2},{value:"Third-party Libraries",id:"third-party-libraries",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"We recommend using selectors when using either the properties or actions from the store. You can access values from the store like so:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"const bears = useBearStore((state) => state.bears)\n"})}),"\n",(0,s.jsx)(t.p,{children:"However, writing these could be tedious. If that is the case for you, you can auto-generate your selectors."}),"\n",(0,s.jsxs)(t.h2,{id:"create-the-following-function-createselectors",children:["create the following function: ",(0,s.jsx)(t.code,{children:"createSelectors"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"import { StoreApi, UseBoundStore } from 'zustand'\r\n\r\ntype WithSelectors<S> = S extends { getState: () => infer T }\r\n  ? S & { use: { [K in keyof T]: () => T[K] } }\r\n  : never\r\n\r\nconst createSelectors = <S extends UseBoundStore<StoreApi<object>>>(\r\n  _store: S,\r\n) => {\r\n  let store = _store as WithSelectors<typeof _store>\r\n  store.use = {}\r\n  for (let k of Object.keys(store.getState())) {\r\n    ;(store.use as any)[k] = () => store((s) => s[k as keyof typeof s])\r\n  }\r\n\r\n  return store\r\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"If you have a store like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"interface BearState {\r\n  bears: number\r\n  increase: (by: number) => void\r\n  increment: () => void\r\n}\r\n\r\nconst useBearStoreBase = create<BearState>()((set) => ({\r\n  bears: 0,\r\n  increase: (by) => set((state) => ({ bears: state.bears + by })),\r\n  increment: () => set((state) => ({ bears: state.bears + 1 })),\r\n}))\n"})}),"\n",(0,s.jsx)(t.p,{children:"Apply that function to your store:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"const useBearStore = createSelectors(useBearStoreBase)\n"})}),"\n",(0,s.jsx)(t.p,{children:"Now the selectors are auto generated and you can access them directly:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// get the property\r\nconst bears = useBearStore.use.bears()\r\n\r\n// get the action\r\nconst increment = useBearStore.use.increment()\n"})}),"\n",(0,s.jsx)(t.h2,{id:"vanilla-store",children:"Vanilla Store"}),"\n",(0,s.jsxs)(t.p,{children:["If you are using a vanilla store, use the following ",(0,s.jsx)(t.code,{children:"createSelectors"})," function:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"import { StoreApi, useStore } from 'zustand'\r\n\r\ntype WithSelectors<S> = S extends { getState: () => infer T }\r\n  ? S & { use: { [K in keyof T]: () => T[K] } }\r\n  : never\r\n\r\nconst createSelectors = <S extends StoreApi<object>>(_store: S) => {\r\n  const store = _store as WithSelectors<typeof _store>\r\n  store.use = {}\r\n  for (const k of Object.keys(store.getState())) {\r\n    ;(store.use as any)[k] = () =>\r\n      useStore(_store, (s) => s[k as keyof typeof s])\r\n  }\r\n\r\n  return store\r\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"The usage is the same as a React store. If you have a store like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"import { createStore } from 'zustand'\r\n\r\ninterface BearState {\r\n  bears: number\r\n  increase: (by: number) => void\r\n  increment: () => void\r\n}\r\n\r\nconst store = createStore<BearState>((set) => ({\r\n  bears: 0,\r\n  increase: (by) => set((state) => ({ bears: state.bears + by })),\r\n  increment: () => set((state) => ({ bears: state.bears + 1 })),\r\n}))\n"})}),"\n",(0,s.jsx)(t.p,{children:"Apply that function to your store:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"const useBearStore = createSelectors(store)\n"})}),"\n",(0,s.jsx)(t.p,{children:"Now the selectors are auto generated and you can access them directly:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// get the property\r\nconst bears = useBearStore.use.bears()\r\n\r\n// get the action\r\nconst increment = useBearStore.use.increment()\n"})}),"\n",(0,s.jsx)(t.h2,{id:"live-demo",children:"Live Demo"}),"\n",(0,s.jsxs)(t.p,{children:["For a working example of this, see the ",(0,s.jsx)(t.a,{href:"https://codesandbox.io/s/zustand-auto-generate-selectors-forked-rl8v5e?file=/src/selectors.ts",children:"Code Sandbox"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"third-party-libraries",children:"Third-party Libraries"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/Albert-Gao/auto-zustand-selectors-hook",children:"auto-zustand-selectors-hook"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/dai-shi/react-hooks-global-state",children:"react-hooks-global-state"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/udecode/zustood",children:"zustood"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://www.npmjs.com/package/@davstack/store",children:"@davstack/store"})}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>c});var s=r(6540);const n={},o=s.createContext(n);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);